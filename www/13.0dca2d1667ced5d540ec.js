(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{yqDY:function(o,t,i){"use strict";i.r(t),i.d(t,"AutoHipodromosPageModule",function(){return y});var e=i("ofXK"),n=i("3Pt+"),s=i("TEn/"),r=i("tyNb"),a=i("mrSG"),p=i("fXoL"),l=i("e8a8"),c=i("I/3d");const d=["onHipPlay"];function h(o,t){1&o&&(p.Sb(0,"ion-header"),p.Sb(1,"ion-toolbar"),p.Sb(2,"ion-title"),p.zc(3,"autoHipodromos"),p.Rb(),p.Sb(4,"ion-button",1),p.zc(5," Ir a transmision principal "),p.Rb(),p.Rb(),p.Rb())}function m(o,t){if(1&o){const o=p.Tb();p.Sb(0,"div",4),p.ac("click",function(){p.pc(o);const i=t.$implicit;return p.cc(2).openHipodromo(i)}),p.Qb(1,"img",5),p.Sb(2,"h3"),p.zc(3),p.Rb(),p.Rb()}if(2&o){const o=t.$implicit;p.Eb(1),p.jc("src",o.cover,p.rc),p.Eb(2),p.Bc("",o.nombre," ")}}function b(o,t){if(1&o&&(p.Sb(0,"ion-content"),p.Sb(1,"div",2),p.xc(2,m,4,2,"div",3),p.Rb(),p.Rb()),2&o){const o=p.cc();p.Eb(2),p.jc("ngForOf",o.hipodromosAll)}}function u(o,t){if(1&o&&(p.Sb(0,"ion-content"),p.Sb(1,"ion-slides",6,7),p.Sb(3,"ion-slide"),p.Sb(4,"div",8),p.Sb(5,"span"),p.zc(6,"Faltan"),p.Rb(),p.Sb(7,"h3"),p.zc(8),p.Sb(9,"span",9),p.zc(10,"Min"),p.Rb(),p.Rb(),p.Sb(11,"span"),p.zc(12),p.Rb(),p.Rb(),p.Qb(13,"video",10),p.Rb(),p.Sb(14,"ion-slide"),p.Qb(15,"video",11),p.Rb(),p.Rb(),p.Rb()),2&o){const o=p.cc();p.Eb(1),p.jc("options",o.slideOpts),p.Eb(7),p.Bc("",o.hipodromoOpen.cuantoFalta," "),p.Eb(4),p.Bc("",o.hipodromoOpen.carreraNro," Carrera ")}}const f=[{path:"",component:(()=>{class o{constructor(o,t){this.app=o,this.db=t,this.slideOpts={initialSlide:0,on:{beforeInit(){const o=this;o.classNames.push(`${o.params.containerModifierClass}fade`);const t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};o.params=Object.assign(o.params,t),o.params=Object.assign(o.originalParams,t)},setTranslate(){const o=this,{slides:t}=o;for(let i=0;i<t.length;i+=1){const t=o.slides.eq(i);let e=-t[0].swiperSlideOffset;o.params.virtualTranslate||(e-=o.translate);let n=0;o.isHorizontal()||(n=e,e=0);const s=o.params.fadeEffect.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0);t.css({opacity:s}).transform(`translate3d(${e}px, ${n}px, 0px)`)}},setTransition(o){const t=this,{slides:i,$wrapperEl:e}=t;if(i.transition(o),t.params.virtualTranslate&&0!==o){let o=!1;i.transitionEnd(()=>{if(o)return;if(!t||t.destroyed)return;o=!0,t.animating=!1;const i=["webkitTransitionEnd","transitionend"];for(let o=0;o<i.length;o+=1)e.trigger(i[o])})}}}}}ngOnInit(){this.app.getHipodromo().subscribe(o=>{if(this.hipodromosAll=o,this.hipodromosAll=this.hipodromosAll.filter(o=>!0===o.actividad),this.hipodromosAll=this.hipodromosAll.filter(o=>!0===o.set),console.log(this.hipodromosAll),this.hipodromoOpen){let o=this.hipodromosAll.filter(o=>o.nombre===this.hipodromoOpen.nombre);console.log("Existe el hipodromo y estas esperando"),console.log(o[0]),this.hipodromoOpen=o[0],"Termino"===o[0].state&&(this.db.collection("hipodromos").doc(this.hipodromoOpen.id).update({state:"En Espera"}).then(()=>{this.hipodromoOpen=o[0],this.countDown()}),this.faltaPoco.play(),this.masterProduccion.slideTo(0),this.hipodromoEnVivo.muted(!0),console.log("Estas en espera para la proxima carrera"))}})}sleep(o){return new Promise(t=>setTimeout(t,o))}openHipodromo(o){return Object(a.b)(this,void 0,void 0,function*(){this.hipodromoOpen=o,console.log(),console.log(o),yield this.sleep(500),this.faltaPoco=videojs(document.getElementById("waitingVideoHipodromo")),this.faltaPoco.poster("../../../../assets/other/poster1.jpg"),this.faltaPoco.src({type:"application/dash+xml",src:this.hipodromoOpen.bumperFaltaPoco}),this.faltaPoco.play(),this.initializeHipodromo(o),yield this.sleep(1e3),this.countDown()})}countDown(){var o=setInterval(()=>{if(this.db.collection("hipodromos").doc(this.hipodromoOpen.id).update({cuantoFalta:this.hipodromoOpen.cuantoFalta-1}).then(()=>{let o=this.hipodromosAll.filter(o=>o.nombre===this.hipodromoOpen.nombre);console.log(o),this.hipodromoOpen=o[0]}),0===this.hipodromoOpen.cuantoFalta){this.dateFalta=0;let t=this.hipodromosAll.filter(o=>o.nombre===this.hipodromoOpen.nombre);console.log(t),this.hipodromoOpen=t[0],this.db.collection("hipodromos").doc(this.hipodromoOpen.id).update({cuantoFalta:0,state:"Corriendo"}),console.log(this.dateFalta),this.faltaPoco.pause(),this.masterProduccion.slideTo(1),this.hipodromoEnVivo.muted(!1),clearInterval(o)}let t=this.hipodromosAll.filter(o=>o.nombre===this.hipodromoOpen.nombre);console.log(t),this.hipodromoOpen=t[0]},6e4)}initializeHipodromo(o){return Object(a.b)(this,void 0,void 0,function*(){yield this.sleep(500),this.hipodromoEnVivo=videojs(document.getElementById("LiveVideoHipodromo")),this.hipodromoEnVivo.poster("../../../../assets/other/poster1.jpg");const t=o.carreraSource.slice(o.carreraSource.length-11);this.hipodromoEnVivo.src({type:"video/youtube",src:"https://www.youtube.com/embed/"+t}),this.hipodromoEnVivo.play()})}}return o.\u0275fac=function(t){return new(t||o)(p.Pb(l.a),p.Pb(c.a))},o.\u0275cmp=p.Jb({type:o,selectors:[["app-auto-hipodromos"]],viewQuery:function(o,t){if(1&o&&p.Ec(d,1),2&o){let o;p.nc(o=p.bc())&&(t.masterProduccion=o.first)}},decls:3,vars:3,consts:[[4,"ngIf"],["routerLink","/auto-principal","slot","end"],[1,"myLiveHipodromos"],["class","myHipodr",3,"click",4,"ngFor","ngForOf"],[1,"myHipodr",3,"click"],["alt","",3,"src"],[2,"height","100%","width","100%",3,"options"],["onHipPlay",""],[1,"faltann"],[2,"font-size","22px"],["id","waitingVideoHipodromo","preload","metadata","loop","","playsinline","","webkit-playsinline","","autoplay","","controls","","allow","accelerometer; gyroscope; autoplay; muted; encrypted-media; picture-in-picture;loop;",1,"video-js","vjs-default-skin",2,"height","100%","width","100%"],["id","LiveVideoHipodromo","preload","metadata","loop","","playsinline","","webkit-playsinline","","autoplay","","muted","","controls","","allow","accelerometer; gyroscope; autoplay; muted; encrypted-media; picture-in-picture;loop;",1,"video-js","vjs-default-skin",2,"height","100%","width","100%"]],template:function(o,t){1&o&&(p.xc(0,h,6,0,"ion-header",0),p.xc(1,b,3,1,"ion-content",0),p.xc(2,u,16,3,"ion-content",0)),2&o&&(p.jc("ngIf",!t.hipodromoOpen),p.Eb(1),p.jc("ngIf",!t.hipodromoOpen),p.Eb(1),p.jc("ngIf",t.hipodromoOpen))},directives:[e.j,s.m,s.M,s.K,s.i,s.V,r.i,s.l,e.i,s.G,s.F],styles:[".myLiveHipodromos[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;margin-top:3%;margin-bottom:3%}.myLiveHipodromos[_ngcontent-%COMP%]   .myHipodr[_ngcontent-%COMP%]{margin:5%;width:90%;height:-webkit-max-content;height:max-content;background:#c1c1c1;border-radius:20px;border:3px solid red}.faltann[_ngcontent-%COMP%]{position:absolute;z-index:10000;bottom:40px;left:5%;background:#f14762;width:247px;height:160px;border-radius:20px;padding:10px;display:flex;flex-direction:column;justify-content:space-evenly;border:2px solid #fff;box-shadow:3px 4px 10px #5c61ba}.faltann[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#ededed;text-shadow:2px 2px 2px #272a5d;font-size:30px}.faltann[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:66px;font-weight:600;color:#fff;text-shadow:3px 3px 7px #272a5d}"]}),o})()}];let g=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=p.Nb({type:o}),o.\u0275inj=p.Mb({imports:[[r.j.forChild(f)],r.j]}),o})(),y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=p.Nb({type:o}),o.\u0275inj=p.Mb({imports:[[e.c,n.a,s.N,g]]}),o})()}}]);